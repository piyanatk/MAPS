<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8">
  <title></title>
  <meta name="GENERATOR" content="OpenOffice.org 2.3  (Linux)">
  <meta name="AUTHOR" content="Randall Wayth">
  <meta name="CREATED" content="20080219;11370300">
  <meta name="CHANGEDBY" content="Randall Wayth">
  <meta name="CHANGED" content="20080219;12435800">
</head>
<body dir="ltr" lang="en-US">
<h1 align="center">MAPS – The manual</h1>
<h2><a name="Intro"></a>
<font face="Albany, sans-serif"><font size="4">Introduction</font></font></h2>
<p>MAPS (“MIT Array Performance Simulator”) is a collection of
programs to simulate an interferometer radio telescope. It consists
of the following:
</p>
<ul>
  <li>
    <p><a href="#LOsim">LOsim</a>: generates a pixellized simulated sky
brightness array from a list of Gaussian sources and an optional
background sky image. Can also FFT this to the UV sky although the FFT
can be very slow for large images. </p>
  </li>
  <li>
    <p><a href="#maps_makesky">maps_makesky</a>: takes an all-sky image
and projects it onto the visble sky for some LST and latitude. Useful
as a background image for LOsim or to make standalone sky images.</p>
  </li>
  <li>
    <p><a href="#maps_im2uv">maps_im2uv</a>: takes a sky brightness
image FITS file (output from LOsim and/or maps_makesky), FFTs it,
rearranges the data and writes it in a format that visgen expects. </p>
  </li>
  <li>
    <p><a href="#visgen">visgen</a>: The workhorse of MAPS. Takes FFT'd
data from LOsim/maps_im2uv and a description of the array and
observation and generates simulated visibilities for the array. Can
also take a list of ponit sources and include them in visibilities with
or without a sky from LOsim.<br>
    </p>
  </li>
  <li>
    <p><a href="#maps2uvfits">maps2uvfits</a>: takes the output binary
file from visgen and writes a UVFITS file. </p>
  </li>
</ul>
<p>
There are a number of configuration
files, which are explained in detail below.</p>
<h3><font face="Albany, sans-serif"><font size="4">Background</font></font></h3>
<p>Those new to interferometry should consult one of the texts or
sets of lectures on the subject.<br>
</p>
<h3>Installation</h3>
<p>There is a README file in the base directory that has the most
up-to-date instructions for installation. The installation requires a
number of dependencies and environment variables to be
installed/created. The <span style="font-family: monospace;">SIM</span>
environment variable must point to the base installation directory.<br>
</p>
<h2><a name="LOsim"></a>
<font face="Albany, sans-serif"><font size="4">LOsim</font></font></h2>
Usage: <span style="font-family: monospace;">LOsim sim_name</span><br>
<br>
Background: When LOsim was being designed, there were grand plans for
it. Few of them came to fuition, but some of the configuration files
still contain options for features that LOsim doesn't support and never
will. Please just ignore them as much as possible.<br>
<br>
LOsim does put a basic WCS into the fits image it generates, so this
can be viewed in suitable viewer. Take note of whether your viewer puts
east to the left or right...<br>
<br>
<span style="text-decoration: underline;">Command-line arguments:</span><br>
sim_name: the base name of the simulation which is also used in
fetching all configuration files.<br>
<br>
<span style="text-decoration: underline;">Interactive commands</span><br>
s:&nbsp;&nbsp; add all the sources in the SourceList file to the image.<br>
x:&nbsp;&nbsp; write the file to &lt;sim_name&gt;_Brightness.fts (note,
no 'i' in fits) and exit<br>
<br>
<span style="text-decoration: underline;">Configuration files</span><br>
Observation_&lt;sim_name&gt;.txt:&nbsp;&nbsp; sets metadata for the
image generated by LOsim including pixel size and field center
co-ordinates. The start time, end time, frequency and bandwidth info
are not used.<br>
SourceList_&lt;sim_name&gt;.txt:&nbsp;&nbsp; a file containing a list
of sources to be added to the image.<br>
&lt;sim_name&gt;_Description.txt: another metadata file, this one has
the size of the image in it and other redundant data that still needs
to be set correctly.<br>
<h3><a name="maps_makesky"></a>
<font face="Albany, sans-serif"><font size="4">maps_makesky</font></font></h3>
<p><br>
<br>
</p>
<h3><a name="maps_im2uv"></a> <font face="Albany, sans-serif"><font
 size="4">MAPS_im2uv</font></font></h3>
<p>Note that MAPS_im2uv does not read or use any world coordinate
system data from the FITS image. It simply treats the image as a 2D
dimensionless set of pixels and does the transform. The units of the
image can be adjusted by using the -n command-line arg. If the input
was generated from LOsim, generally the value of the multiplicative
constant should be the sky area in square radian. Don't forget that the
image is square, not circular, so if your input image is π * π, then
the sky area is π<sup>2</sup>, not 4π.<br>
</p>
<p>Command-line args:</p>
<p>-i filename:&nbsp;&nbsp; name of the input 2D FITS image<br>
-o filename:&nbsp;&nbsp; name of the output binary file for visgen<br>
-n number:&nbsp;&nbsp; multiplicative constant to apply to the image to
make the units Jansky/steradian.<br>
</p>
<p>deprecated options: don't use these.<br>
-s<br>
-f<br>
</p>
<h3><a name="visgen"></a>
<font face="Albany, sans-serif"><font size="4">visgen</font></font></h3>
<p>Run <span style="font-family: monospace;">visgen</span> with no
arguments to see a summary of command-line args.</p>
Compulsory command-line args:<br>
-n name:&nbsp;&nbsp; resulting file is called "name.vis".<br>
-s site_name:&nbsp;&nbsp; specify a site for the array from one of the
ones listed in <span style="font-family: monospace;">$SIM/text/sites.txt</span>
.<br>
-A array_name:&nbsp;&nbsp; specify an array configuration file from one
of the files in <span style="font-family: monospace;">$SIM/array/</span>
.<br>
-V obs_spec:&nbsp;&nbsp; name the <a href="obs_spec.html">observation
specification</a> file (must be in the same directory that visgen is
run in).<br>
<br>
Input and configuration files:<br>
<br>
-G data_file_name:&nbsp;&nbsp; name of a UV grid data file (generated
by LOsim or maps_im2uv). If multiple input polarisations are required,
specify multiple -G options. Assumes the order is I,Q,U,V.<br>
-O name:&nbsp;&nbsp; include a list of point sources ("oob sources") to
be added analytically to the visibilites.<br>
-I name:&nbsp;&nbsp; name of an ionospheric model file. (turns on the
ionospheric modelling.)<br>
-i name:&nbsp;&nbsp; name of the ionospheric settings configuration
file (for use with -I)<br>
<br>
<a name="maps2uvfits"></a><br>
Other command-line switches:<br>
-N:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; do not add random
noise to the visibilities<br>
-S sefd:&nbsp;&nbsp; specify a global system equivalent flux density
for all stations when adding noise<br>
-Z:&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; do not compute
visibilities from an input UV image (i.e. the one specified with -G)<br>
-m num:&nbsp;&nbsp; set debugging/infomative message output level.
(2=little through -2=lots and lots).<br>
<br>
Output:<br>
&lt;name&gt;.vis:&nbsp;&nbsp; a binary file (with this <a
 href="visgen_binary_format.html">format</a>) containing the
visibilities.<br>
<h3><font face="Albany, sans-serif"><font size="4">maps2uvfits</font></font></h3>
<p style="margin-top: 0.17in; page-break-after: avoid;"><br>
<font face="Albany, sans-serif"><font size="4"></font></font><br>
<font face="Albany, sans-serif"><font size="4">Credits</font></font></p>
<p>MAPS was originally developed at MIT Haystack Observatory by Roger
Capallo, Shep Doeleman and Colin Lonsdale with contributions from
Ramesh Bhat and Divya Oberoi. Additional development for the MWA
project by Randall Wayth with contributions from Justin Kasper,
Daniel Mitchell and Steve Ord. The diffuse sky background model uses
code from Angelica de Oliveira-Costa.</p>
<p style="margin-top: 0.17in; page-break-after: avoid;"><font
 face="Albany, sans-serif"><font size="4">References</font></font></p>
<p>1- “Interferometry and Synthesis in Radio Astronomy” by
Thompson, Moran and Swenson, 2<sup>nd</sup> edition. <a
 href="http://adsabs.harvard.edu/abs/2001isra.book.....T">ADS
link</a>.</p>
<p>2- Synth imaging workshop</p>
<p>3- “A model of diffuse Galactic Radio Emission from 10 MHz to
100 GHz”. <a href="http://adsabs.harvard.edu/abs/2008arXiv0802.1525D">ArXiv
link</a>. <a href="http://space.mit.edu/home/angelica/gsm">Homepage
link</a>.</p>
<p><br>
<br>
</p>
</body>
</html>
