Creation of brightness images with brigen program

1. Create a brightness image from the source list located in the testprj1.txt
project file. Run brigen:

brigen testprj1a.txt

2. Run ds9 program to view the source distribution:

ds9 testprj1a.fits &

3. Create first auxiliary image from the external source list using the same
image parameters as for the first image. Run brigen with the option -s
srclist-file and the output file on the command line:

brigen testprj1a.txt -s auxsrclist1.txt extimg1.fits

4. Create second auxiliary image from the external source list using the same
image parameters as for the first image. Run brigen with the option -s
srclist-file and the output file on the command line:

brigen testprj1a.txt -s auxsrclist2.txt extimg2.fits
 
5. View extimg1.fits and extimg2.fits images with ds9 program:

ds9 extimg1.fits &
ds9 extimg2.fits &

6. Run brigen with testprj1b.txt project file. It is almost the same as
testprj1a.txt, but it has two 'addimage' lines, which instruct brigen to add the
externa images, extimg1.fits and extimg2.fits, to the output inage:

brigen testprj1b.txt

7. View the output FITS file with ds9:

ds9 testprj1b.fits &

To see the image better, use ds9 scale/square root buttons.
Comparing testprj1b.fits image with testprj1a.fits, extimg1.fits, and
extimg2.fits shows that it is obviously a sum of the three latter images. 

8. Brigen can be run without a project file, with only the source list
file. However, in this case the user must provide all the necessary parameters
on the command line. Let us try to make the same image as testprj1b.fits
directly from the srclist1.txt source list:

brigen srclist1.txt -m 1024 -n 1024 -x 7:39:24hms -y -26:25:52.0dms \
       		    -a 10deg -b "600'" -i extimg1.fits -i extimg2.fits \
		    testprj1.fits

9. Compare the last output, testprj1.fits, with testprj1b.fits:

ds9 testprj1.fits &
ds9 testprj1b.fits &

The files are identical.

10. Simulate the observation of the obtained sky image with the model of the MWA
T32 radiotelescope. Run the following sequence og MAPS and MIRIAD commands:


MAPS_im2uv -i testprj1.fits -o testprj1_visibility.dat -n 0.0304617 

visgen -n testprj1 -s MWA_ED -A ~/maps/array/mwa_32.txt  \
       -G testprj1_visibility.dat -V obs_spec_testprj.txt -N -m 0

maps2uvfits testprj1.vis testprj1.uvfits -26.4311 114.85 400.0 \
	    $SIM/array/mwa_32.txt

rm -rf testprj1.uv testprj1.map testprj1.beam testprj1.clean testprj1.restor
rm -rf testprj1.uv testprj1.map testprj1.beam testprj1.clean testprj1.restor

fits in='testprj1.uvfits' out='testprj1.uv' op='uvin'

invert vis=testprj1.uv beam=testprj1.beam map=testprj1.map imsize=1024,1024

clean map=testprj1.map beam=testprj1.beam out=testprj1.clean niters=10000

restor model=testprj1.clean beam=testprj1.beam map=testprj1.map \
       out=testprj1.restor

fits op='xyout' in='testprj1.restor' out='proj1res.fits'

11. View the observation result in file proj1res.fits; compare it with the sky
image generated by brigen in testprj1.fits:

ds9 proj1res.fits &
ds9 testprj1.fits &

12. The command sequence from p. 10 is in the shell script file t01, so instead
of typing the commands, one can run the script t01:

./t01

13. The script clean.testprj1 removes the test results:

./clean.testprj1


